!function(n){return"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():window.pubsub=n()}(function(){var n,l,t,u,r,e,a,o=[].slice;return e={},n=function(){var n,l,t,u,r,a,c;if(c=arguments[0],n=2<=arguments.length?o.call(arguments,1):[],a=e[c]){for(l=a.length,u=[];l--&&(r=(t=a[l]).callback.apply(t,n),"stop_sub_invocations"!==r);)u.push(void 0);return u}},l=function(){var l,t,u,r,e,a,c;for(c=arguments[0],l=2<=arguments.length?o.call(arguments,1):[],r=c.split(" "),e=[],t=0,u=r.length;u>t;t++)a=r[t],e.push(n.apply(null,[a].concat(o.call(l))));return e},t=function(){var l,t,u,r,e,a,c,p;for(p=arguments[0],t=2<=arguments.length?o.call(arguments,1):[],e=p.split(" "),a=[],u=0,r=e.length;r>u;u++)c=e[u],c.indexOf(":")>-1?(l=c.split(":"),"-"===l[0][0]?(l[0]=l[0].substring(1),n.apply(null,[l[0]+":"+l[1]].concat(o.call(t))),a.push(n.apply(null,[l[0],l[1]].concat(o.call(t))))):(n.apply(null,[l[0],l[1]].concat(o.call(t))),a.push(n.apply(null,[l[0]+":"+l[1]].concat(o.call(t)))))):a.push(n.apply(null,[c].concat(o.call(t))));return a},u=function(n,l,t,u){var r,a,o,c,p,i,s,f;for(u||"number"!=typeof t?u||t||(t=l,l=null):(u=t,t=l,l=null),null==u&&(u=10),i=n.split(" "),c=0,p=i.length;p>c;c++){for(f=i[c],r=!1,null==e[f]&&(e[f]=[]),a={callback:t,label:l,priority:u},s=e[f],o=s.length;o--;)if(s[o].priority<=u){s.splice(o+1,0,a),r=!0;break}r||e[f].unshift(a)}return t},r=function(n,l,t,r){var e,c,p,i,s,f,g;for(r||"number"!=typeof t?r||t||(e="noCtxAndPrio",t=l,l=null):(e="noCtx",r=t,t=l,l=null),null==r&&(r=10),c=function(){var l;return l=1<=arguments.length?o.call(arguments,0):[],a(n,c),t.apply(null,l)},f=n.split(" "),p=function(n){return"noCtx"===e?u(n,c,r):"noCtxAndPrio"===e?u(n,c):u(n,l,c,r)},i=0,s=f.length;s>i;i++)g=f[i],p(g);return c},a=function(n,l){var t,u,r,a,o,c,p,i;if(l||(l=n,n=null),n){for(a=n.split(" "),o=[],u=0,r=a.length;r>u;u++)i=a[u],e[i]&&(p=e[i],t=p.length,o.push(function(){var n;for(n=[];t--;)p[t].label===l||p[t].callback===l?n.push(p.splice(t,1)):n.push(void 0);return n}()));return o}c=[];for(i in e)p=e[i],t=p.length,c.push(function(){var n;for(n=[];t--;)p[t].label===l||p[t].callback===l?n.push(p.splice(t,1)):n.push(void 0);return n}());return c},{emit:l,pub:l,emits:t,pubs:t,on:u,sub:u,once:r,subOnce:r,off:a,unsub:a}});